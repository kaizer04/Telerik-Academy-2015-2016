04:31:40h


 докато разцъквах решението на примерния изпит, което Иво писа четвъртък, забелязах проблем при logout-ването. Когато потребителя се logout-не, на клиента остават линковете, които са само за оторизирани потребители. Проблема е, че никога не се чисти app.locals.currentUser. Оправих го, като добавих един else в middleware-а, който се грижи за това, а именно:
if (req.user) {
     app.locals.currentUser = req.user;
}
else {
     app.locals.currentUser = undefined;
}
